# 상속과 코드 재사용
- 이번 장에서는 클래스를 재사용하기 위해 새로운 클래스를 추가하는 가장 대표적인 기법인 상속에 관해 살펴보기로 한다.<br>
- 재사용 관점에서 상속이란 클래스 안에 정의된 인스턴스 변수와 메서드를 자동으로 새로운 클래스를 추가하는 것이다.
- 합성이란? 새로운 클래스의 인스턴스 안에 기존 클래스의 인스턴스를 포함시키는 방법.

## 상속과 중복 코드
### DRY 원칙
- 중복 코드는 변경을 방해한다.
- 중복 여부를 판단하는 기준은 변경이다.<br>
요구사항이 변경됐을 때 두 코드를 함께 수정해야 한다면 이 코드는 중복이다.<br>
  - 함께 수정할 필요가 없다면 중복이 아니다.<br>
  - 중복 코드를 결정하는 기준은 코드의 모양이 아니다.<br>
  모양이 유사하다는 것은 단지 중복의 징후일뿐이고, 중복 여부를 결정하는 기준은 코드가 변경에 반응하는 방식이다.<br><br>
    
- DRY 원칙 ===> 반복하지마라 <b style="color:orange">Don't Repeat YourSelf</b><bR>
한 번, 단 한 번 원칙(Once and Only Once) 또는 단일 지점 제어(Single-Point Control) 원칙 이라고도 부른다.
> DRY 원칙
> 모든 지식은 시스템 내에서 단일하고, 애매하지 않고, 정말로 믿을 만한 표현 양식을 가져야 한다.

### 중복과 변경 
- 비현실적인 코드일지라도 깔끔하고 이해가 쉽다면 사용.
- 상속을 이용해 코드를 재사용 하기 위해서는 부모 클래스의 개발자가 세웠던 가정이나 추론 과정을 정확하게 이해해야 한다.<br>
- 자식 클래스의 작성자가 부모 클래스의 구현 방법에 대한 정확한 지식을 가져야 한다는 것을 의미한다.<br><br>

- 상속은 결합도를 높인다. 상속이 초래하는 부모 클래스와 자식 클래 사이의 강한 결합이 코드를 수정하기 어렵게 만든다.<br><br>
- 상속을 위한 경고1
  - 자식 클래스의 메서드 안에서 super 참조를 이용해 부모 클래스의 메서드를 직접 호출할 경우 두 클래스는 강하게 결합된다.<br>
    super 호출을 제거할 수 있는 방법을 찾아 결합도를 제거하라.
    
- 지금까지 살펴본 예제들은 자식 클래스가 부모 클래스의 구현에 강하게 결합될 경우 부모 클래스의 변경에 의해 자식 클래스가 영향을 받는다는 사실을 잘 보여준다.<br>
상속을 사용하면 적은 노력으로도 새로운 기능을 쉽고, 빠르게 추가할 수 있다. 하지만 그로 인해 커다란 대가를 치러야할 수 도 있다.<br><br>
  
- 상속 관계로 연결된 자식 클래스가 부모 클래스의 변경에 취약해지는 현상을 가리켜 취약한 기반 클래스 문제.
- 취약한 기반 클래스 문제는 코드 재사용을 목적으로 상속을 사용할 때 발생하는 가장 대표적인 문제다.

### 취약한 기반 클래스 문제
- 기반 클래스 문제는 상속이라는 문맥 안에서 결합도가 초래하는 문제점을 가리키는 용어다.<br>
상속은 자식 클래스는 점진적으로 추가해서 기능을 확장하는 데는 용이하지만 높은 결합도를 인해 부모 클래스를 점진적으로 개선하는 것을 어렵게 만든다.<br>
  최악의 경우에는 모든 자식 클래스를 동시에 수정하고 테스트해야 할 수도 있따.
  
- 취약한 기반 클래스 문제는 캡슐화를 약화시키고 결합도를 높인다.<br>
상속은 자식 클래스가 부모 클래스의 구현 세부사항에 의존하도록 만들기 때문에 캡슐화를 약화시킨다.<br>
  
- 객체를 사용하는 이유는 구현과 관련된 세부사항을 퍼블릭 인터페이스 뒤로 캡슐화할 수 있기 때문이다.<br>
캡슐화는 변경에 의한 파급효과를 제어할 수 있기 때문에 가치가 있다.<br>
  객체는 변경될지도 모르는 불안정한 요소를 캡슐화함으로써 파급효과를 걱정하지 않고도 자유롭게 내부를 변경할 수 있다.<br><br>
  
- 안타깝게도 상속을 사용하면 부모 클래스의 퍼블릭 인터페이스가 아닌 구현을 변경하더라도 자식 클래스가 영향을 받기 쉬워진다.<br>
상속 계층의 상위에 위치한 클래스에 위치한 클래스에 가해지는 작은 변경만으로도 상속 계층에 속한 모든 자손들이 급격하게 요동칠 수 있다.<br><br>
  
- 객체지향의 기반은 캡슐화를 통한 변경의 통제다.<br>
상속은 코드의 재사용을 위해 캡슐화의 장점을 희석시키고 구현에 대한 결합도를 높임으로써 객체지향이 가진 강력함을 반감시킨다.<br>
  
### 불필요한 인터페이스 상속문제
- java.util.Properties 와 java.util.Stack 이 예제.

- 상속을 위한 경고2
  - 상속 받은 부모 클래스의 메서드가 자식 클래스의 내부 구조에 대한 규칙을 깨트릴 수 있다.<br>
    
### 메서드 오버라이딩의 오작용 문제
- 상속을 위한 경고 3
  - 자식 클래스가 부모 클래스의 메서드를 오버라이딩할 경우 부모 클래가 자신의 메서드를 사용하는 방법에 자식 클래스가 결합될 수 있다.
    
### 부모 클래스와 자식 클래스의 동시 수정 문제
 - 상속을 위한 경고 4
    - 클래스를 상속하면 결합도로 인해 자식 클래스와 부모 클래스의 구현을 영원히 변경하지 않거나, 자식 클래스의 부모 클래스를 동시에 변경하거나 둘 중 하나를 선택할 수 밖에 없다.
    
### 추상화에 의존하자.
- 개인적으로 코드 중복을 제거하기 위해 상속을 도입할 때 따르는 두 가지 원칙이 있다.<br>
  - 두 메서드가 유사하게 보인다면 차이점을 메서드로 추출하라. 메서드 추출을 통해 두 메서드를 동일한 형태로 보이도록 만들 수 있다.<br>
  - 부모 클래스의 코드를 하위로 내리지 말고 자식 클래스의 코드를 상위로 올려라.<br>
    부모 클래스의 구체적인 메서드를 자식 클래스로 내리는 것보다 자식 클래스의 추상적인 메서드를 부모 클래스로 올리는 것이 재사용성과 응집도 측면에서 더 뛰어난 결과를 얻을 수 있다.<br>
    

### 차이를 메서드로 추출하라.

### 중복 코드를 부모 클래스로 올려라
- 부모 클래스를 추가하자 목표는 모든 클래스들이 추상화에 의존하도록 만드는 것이기 때문에 이 클래스는 추상 클래스로 구현하는 것이 적합할 것이다.

### 추상화가 핵심이다.

### 의도를 드러내는 이름 선택하기

## 차이에 의한 프로그래밍
- 기존 코드와 다른 부분만을 추가함으로써 어플리케이션의 기능을 확장하는 방법을 차이에 의한 프로그래밍이라고 부른다.

- 상속을 이용하면 이미 존재하는 클래스의 코드를 쉽게 재사용할 수 있기 때문에 어플리케이션의 점진적인 정의가 가능해진다.

- 객체지향 세계에서 중복 코드를 제거하고 재사용할 수 있는 가장 유명한 방법은 상속이다.
기본 아이디어는 간단하다. 여러 클래스에 공통적으로 포함돼 있는 중복 코드를 하나의 클래스로 모은다.<br>
  원래 클래스들에서 중복 코드를 제거한 후 중복 코드가 옮겨진 클래스를 상속 관계로 연결한다.<br>
  코드를 컴파일 하면 무대 뒤에서 마법이 일어나 상속 관계로 연결된 코드들이 하나로 합쳐진다.<br>
  따라서 상속을 사용하면 여러 클래스 사이에서 재사용 가능한 코드를 하나의 클래스 안으로 모을 수 있다.