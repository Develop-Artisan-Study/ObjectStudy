# 설계 품질과 트레이드 오프

**객체지향 설계의 핵심은 역할, 책임, 협력이다.**

**이번 장에서는 데이터 중심의 설계를 해보고 객체지향 설계와 차이를 알아보도록 한다.**

## 데이터 중심의 영화 예매 시스템

- 두 가지의 설계
  - 객체지향 설계
    - 상태 중심
    - 책임 중심
  - 데이터 중심 설계
    - 상태 중심
- 객체의 상태는 구현이며 책임은 인터페이스이다.

## 설계 트레이드오프

- 데이터 중심 설계와 책임 중심 설계의 장단점을 비교
  - 캡슐화
  - 응집도
  - 결합도

### 캡슐화

- 복잡성을 다루기 위한 가장 효과적인 도구는 추상화다.
- 복잡성을 취급하는 주요한 추상화 방법이 캡슐화다.
- 객체지향 프로그래밍에서 설계 과정 동안 캡슐화를 목표로 인식할 때 달성할 수 있다.
- 유지보수성
  - 어려움 없이 코드를 변경할 수 있는 능력을 말한다.

### 응집도와 결합도

- 응집도
  - 모듈에 포함된 내부 요소들이 연관되어 있는 정도를 나타낸다.
  - 모듈 내의 요소들이 얼마나 같은 목적을 추구하는지에 대한 척도이다.
- 결합도
  - 의존성의 정도를 나타낸다.
  - 다른 모듈에 대해 얼마나 많은 지식을 갖고 있는지를 나타내는 척도이다.
- 응집도가 높으면 변경의 대상과 범위가 명확해지며 코드를 변경하기 쉬워진다.
- 결합도가 높으면 하나의 모듈이 변경되기 위해서 다른 모듈의 변경이 늘어난다.

## 데이터 중심의 영화 예매 시스템의 문제점

- 데이터 중심의 설계는 캡슐화를 위반하며 내부 구현을 인터페이스의 일부로 만든다.
- 그러므로 다음과 같은 문제점을 가진다.

### 캡슐화 위반

- 코드에서 객체의 내부에 접근할 수 없지만 메서드 명은 객체 내부의 정보를 캡슐화하지 못한다.
- 객체가 수행할 책임이 아니라 내부의 데이터에 초점을 맞췄기 때문이다.

### 높은 결합도

- 타입 변경으로 인해 협력하는 클래스들이 변경된다.
- 제어 로직이 특정 객체에 집중되어 강하게 결합된다.

### 낮은 응집도

- 객체 안의 코드가 지나치게 많아지며 복잡해 진다.
- 요구사항 변경을 수용하기 위해 지나치게 많은 클래스들을 수정해야 한다.

## 자율적인 객체를 향해

### 캡슐화를 지켜라

- 설계의 제 1원리이며 이를 위반하면 낮은 응집도와 높은 결합도라는 문제가 발생한다.

### 스스로 자신의 데이터를 책임지는 객체

- 상태와 행동을 객체라는 하나의 단위로 묶는 이유로 스스로 자신의 상태를 처리하기 위해서다.
- 이 객체가 어떤 데이터를 포함해야 하는가
- 이 객체가 데이터에 대해 수행해야 하는 오퍼레이션은 무엇인가

## 하지만 여전히 부족하다

### 캡슐화 위반

- 자신의 데이터를 스스로 처리한다.
- 하지만 객체 내부에 어떠한 데이터가 있는지 메서드의 파라미터들로 노출 하고 있다.
- 새로운 할인 정책이 추가되면 모든 클라이언트가 영향을 받는다.

### 높은 결합도

- 구현을 변경하는데도 다른 객체가 영향을 받는다.

### 낮은 응집도

- 할인 여부를 판단하는 정보가 변경된다면 파라미터 또한 변경되어야 한다.



## 데이터 중심 설계의 문제점

- 객체의 행동 보다는 상태에 초점을 맞추기 때문에 생긴다.

- 너무 이른 시기에 데이터에 관해 결정하도록 요구한다.

- 협력이라는 문맥을 고려하지 않고 고립시킨채 오퍼레이션을 결정한다.

  